<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Updates</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div class=toc>
<UL>
<LI><A href=index.html>[home]</A>
<p>
<li><a href="#os">OS Updates</a>
<li><a href="#os">Other Manual Updates</a>
</UL>
</div>

<div class=main>
<H1>Debian 12 Update Notes</H1>

<p>In going from Debian 10 to Debian 12, there are a few notes.</p>

<p>Rspamd has moved over completely to redis.  Previously we were
using sqlite to store the classifier statistics.  The stats are under
<code>/var/lib</code> and will be lost when replacing the system disk.
Copy the spam/ham sqlite someplace safe.  They are at:

<PRE class=code>
/var/lib/rspamd/bayes.spam.sqlite
/var/lib/rspamd/bayes.ham.sqlite
/var/lib/rspamd/learn_cache.sqlite
</PRE>

Once you have the new redis-based installation in place, import them
as below:</p>

<PRE class=code>
% rspamadm statconvert --redis-host 127.0.0.1 \
   --spam-db bayes.spam.sqlite --symbol-spam BAYES_SPAM \
   --ham-db bayes.ham.sqlite --symbol-ham BAYES_HAM
   --cache learn_cache.sqlite
</PRE>

<p>Going forward, make sure that the redis database is part of your
backup set.  You can specify <code>redis_dbdir</code> to move it to
your encrypted directory or another backed up location.</p>

<p>There is no mail.log in /var/log anymore because rsyslog is no
longer installed by default in debian 12. systemd journals is used for
collecting logs from services.  I ran into a problem with permissions
on the postfix spool directory and it wasn't starting.  To see the log
for postfix, now you do:</p>

<PRE class=code>
% journalctl -u postfix@-.service
</PRE>

<p>You can check service name by bash auto complete. Or view the list
from "systemctl status" command.</p>

<div class=copyright>
<p>Copyright &copy; 2020-2025 David Loffredo, licensed under
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
CC BY-SA 4.0</a>.
</p>
</div>
</div>
</body>
</html>
